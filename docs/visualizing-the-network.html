<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>9.4 Visualizing the network | Applied Network Science with R</title>
  <meta name="description" content="An improvised book on applied Network Science with R." />
  <meta name="generator" content="bookdown 0.33 and GitBook 2.6.7" />

  <meta property="og:title" content="9.4 Visualizing the network | Applied Network Science with R" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="An improvised book on applied Network Science with R." />
  <meta name="github-repo" content="gvegayon/appliedsnar" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="9.4 Visualizing the network | Applied Network Science with R" />
  
  <meta name="twitter:description" content="An improvised book on applied Network Science with R." />
  

<meta name="author" content="George G. Vega Yon, Ph.D." />


<meta name="date" content="2023-03-25" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="reading-a-network.html"/>
<link rel="next" href="hypothesis-testing-in-networks.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-40608305-4"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-40608305-4');
</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Applied Network Science with R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Preface</a></li>
<li class="chapter" data-level="2" data-path="about-the-author.html"><a href="about-the-author.html"><i class="fa fa-check"></i><b>2</b> About the Author</a></li>
<li class="part"><span><b>I Applications</b></span></li>
<li class="chapter" data-level="3" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>3</b> Introduction</a></li>
<li class="chapter" data-level="4" data-path="r-basics.html"><a href="r-basics.html"><i class="fa fa-check"></i><b>4</b> R Basics</a>
<ul>
<li class="chapter" data-level="4.1" data-path="what-is-r.html"><a href="what-is-r.html"><i class="fa fa-check"></i><b>4.1</b> What is R</a></li>
<li class="chapter" data-level="4.2" data-path="how-to-install-packages.html"><a href="how-to-install-packages.html"><i class="fa fa-check"></i><b>4.2</b> How to install packages</a></li>
<li class="chapter" data-level="4.3" data-path="prerequisites.html"><a href="prerequisites.html"><i class="fa fa-check"></i><b>4.3</b> Prerequisites</a></li>
<li class="chapter" data-level="4.4" data-path="a-gentle-quick-n-dirty-introduction-to-r.html"><a href="a-gentle-quick-n-dirty-introduction-to-r.html"><i class="fa fa-check"></i><b>4.4</b> A <del>gentle</del> Quick n’ Dirty Introduction to R</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="network-nomination-data.html"><a href="network-nomination-data.html"><i class="fa fa-check"></i><b>5</b> Network Nomination Data</a>
<ul>
<li class="chapter" data-level="5.1" data-path="data-preprocessing.html"><a href="data-preprocessing.html"><i class="fa fa-check"></i><b>5.1</b> Data preprocessing</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="data-preprocessing.html"><a href="data-preprocessing.html#reading-the-data-into-r"><i class="fa fa-check"></i><b>5.1.1</b> Reading the data into R</a></li>
<li class="chapter" data-level="5.1.2" data-path="data-preprocessing.html"><a href="data-preprocessing.html#creating-a-unique-id-for-each-participant"><i class="fa fa-check"></i><b>5.1.2</b> Creating a unique id for each participant</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="creating-a-network.html"><a href="creating-a-network.html"><i class="fa fa-check"></i><b>5.2</b> Creating a network</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="creating-a-network.html"><a href="creating-a-network.html#from-survey-to-edgelist"><i class="fa fa-check"></i><b>5.2.1</b> From survey to edgelist</a></li>
<li class="chapter" data-level="5.2.2" data-path="creating-a-network.html"><a href="creating-a-network.html#igraph-network"><i class="fa fa-check"></i><b>5.2.2</b> igraph network</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="network-descriptive-stats.html"><a href="network-descriptive-stats.html"><i class="fa fa-check"></i><b>5.3</b> Network descriptive stats</a></li>
<li class="chapter" data-level="5.4" data-path="plotting-the-network-in-igraph.html"><a href="plotting-the-network-in-igraph.html"><i class="fa fa-check"></i><b>5.4</b> Plotting the network in igraph</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="plotting-the-network-in-igraph.html"><a href="plotting-the-network-in-igraph.html#single-plot"><i class="fa fa-check"></i><b>5.4.1</b> Single plot</a></li>
<li class="chapter" data-level="5.4.2" data-path="plotting-the-network-in-igraph.html"><a href="plotting-the-network-in-igraph.html#multiple-plots"><i class="fa fa-check"></i><b>5.4.2</b> Multiple plots</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="statistical-tests.html"><a href="statistical-tests.html"><i class="fa fa-check"></i><b>5.5</b> Statistical tests</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="statistical-tests.html"><a href="statistical-tests.html#is-nomination-number-correlated-with-indegree"><i class="fa fa-check"></i><b>5.5.1</b> Is nomination number correlated with indegree?</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="exponential-random-graph-models.html"><a href="exponential-random-graph-models.html"><i class="fa fa-check"></i><b>6</b> Exponential Random Graph Models</a>
<ul>
<li class="chapter" data-level="6.1" data-path="a-naïve-example.html"><a href="a-naïve-example.html"><i class="fa fa-check"></i><b>6.1</b> A naïve example</a></li>
<li class="chapter" data-level="6.2" data-path="estimation-of-ergms.html"><a href="estimation-of-ergms.html"><i class="fa fa-check"></i><b>6.2</b> Estimation of ERGMs</a></li>
<li class="chapter" data-level="6.3" data-path="the-ergm-package.html"><a href="the-ergm-package.html"><i class="fa fa-check"></i><b>6.3</b> The <code>ergm</code> package</a></li>
<li class="chapter" data-level="6.4" data-path="running-ergms.html"><a href="running-ergms.html"><i class="fa fa-check"></i><b>6.4</b> Running ERGMs</a></li>
<li class="chapter" data-level="6.5" data-path="model-goodness-of-fit.html"><a href="model-goodness-of-fit.html"><i class="fa fa-check"></i><b>6.5</b> Model Goodness-of-Fit</a></li>
<li class="chapter" data-level="6.6" data-path="more-on-mcmc-convergence.html"><a href="more-on-mcmc-convergence.html"><i class="fa fa-check"></i><b>6.6</b> More on MCMC convergence</a></li>
<li class="chapter" data-level="6.7" data-path="mathematical-interpretation.html"><a href="mathematical-interpretation.html"><i class="fa fa-check"></i><b>6.7</b> Mathematical Interpretation</a></li>
<li class="chapter" data-level="6.8" data-path="markov-independence.html"><a href="markov-independence.html"><i class="fa fa-check"></i><b>6.8</b> Markov independence</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="using-constraints-in-ergms.html"><a href="using-constraints-in-ergms.html"><i class="fa fa-check"></i><b>7</b> Using constraints in ERGMs</a>
<ul>
<li class="chapter" data-level="7.1" data-path="example-1-interlocking-egos-and-disconnected-alters.html"><a href="example-1-interlocking-egos-and-disconnected-alters.html"><i class="fa fa-check"></i><b>7.1</b> Example 1: Interlocking egos and disconnected alters</a></li>
<li class="chapter" data-level="7.2" data-path="example-2-bi-partite-networks.html"><a href="example-2-bi-partite-networks.html"><i class="fa fa-check"></i><b>7.2</b> Example 2: Bi-partite networks</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="separable-temporal-exponential-family-random-graph-models.html"><a href="separable-temporal-exponential-family-random-graph-models.html"><i class="fa fa-check"></i><b>8</b> (Separable) Temporal Exponential Family Random Graph Models</a></li>
<li class="chapter" data-level="9" data-path="simulating-and-visualizing-networks.html"><a href="simulating-and-visualizing-networks.html"><i class="fa fa-check"></i><b>9</b> Simulating and visualizing networks</a>
<ul>
<li class="chapter" data-level="9.1" data-path="random-graph-models.html"><a href="random-graph-models.html"><i class="fa fa-check"></i><b>9.1</b> Random Graph Models</a></li>
<li class="chapter" data-level="9.2" data-path="social-networks-in-schools.html"><a href="social-networks-in-schools.html"><i class="fa fa-check"></i><b>9.2</b> Social Networks in Schools</a></li>
<li class="chapter" data-level="9.3" data-path="reading-a-network.html"><a href="reading-a-network.html"><i class="fa fa-check"></i><b>9.3</b> Reading a network</a></li>
<li class="chapter" data-level="9.4" data-path="visualizing-the-network.html"><a href="visualizing-the-network.html"><i class="fa fa-check"></i><b>9.4</b> Visualizing the network</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="visualizing-the-network.html"><a href="visualizing-the-network.html#vertex-size"><i class="fa fa-check"></i><b>9.4.1</b> Vertex size</a></li>
<li class="chapter" data-level="9.4.2" data-path="visualizing-the-network.html"><a href="visualizing-the-network.html#vertex-color"><i class="fa fa-check"></i><b>9.4.2</b> Vertex color</a></li>
<li class="chapter" data-level="9.4.3" data-path="visualizing-the-network.html"><a href="visualizing-the-network.html#vertex-shape"><i class="fa fa-check"></i><b>9.4.3</b> Vertex shape</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="hypothesis-testing-in-networks.html"><a href="hypothesis-testing-in-networks.html"><i class="fa fa-check"></i><b>10</b> Hypothesis testing in networks</a>
<ul>
<li class="chapter" data-level="10.1" data-path="comparing-networks.html"><a href="comparing-networks.html"><i class="fa fa-check"></i><b>10.1</b> Comparing networks</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="comparing-networks.html"><a href="comparing-networks.html#network-bootstrap"><i class="fa fa-check"></i><b>10.1.1</b> Network bootstrap</a></li>
<li class="chapter" data-level="10.1.2" data-path="comparing-networks.html"><a href="comparing-networks.html#when-the-statistic-is-normal"><i class="fa fa-check"></i><b>10.1.2</b> When the statistic is normal</a></li>
<li class="chapter" data-level="10.1.3" data-path="comparing-networks.html"><a href="comparing-networks.html#when-the-statistic-is-not-normal"><i class="fa fa-check"></i><b>10.1.3</b> When the statistic is NOT normal</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="examples.html"><a href="examples.html"><i class="fa fa-check"></i><b>10.2</b> Examples</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="examples.html"><a href="examples.html#average-of-node-level-stats"><i class="fa fa-check"></i><b>10.2.1</b> Average of node-level stats</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="network-diffussion-with-netdiffuser.html"><a href="network-diffussion-with-netdiffuser.html"><i class="fa fa-check"></i><b>11</b> Network diffussion with <code>netdiffuseR</code></a>
<ul>
<li class="chapter" data-level="11.1" data-path="network-diffusion-of-innovation.html"><a href="network-diffusion-of-innovation.html"><i class="fa fa-check"></i><b>11.1</b> Network diffusion of innovation</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="network-diffusion-of-innovation.html"><a href="network-diffusion-of-innovation.html#diffusion-networks"><i class="fa fa-check"></i><b>11.1.1</b> Diffusion networks</a></li>
<li class="chapter" data-level="11.1.2" data-path="network-diffusion-of-innovation.html"><a href="network-diffusion-of-innovation.html#thresholds"><i class="fa fa-check"></i><b>11.1.2</b> Thresholds</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="the-netdiffuser-r-package.html"><a href="the-netdiffuser-r-package.html"><i class="fa fa-check"></i><b>11.2</b> The netdiffuseR R package</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="the-netdiffuser-r-package.html"><a href="the-netdiffuser-r-package.html#overview"><i class="fa fa-check"></i><b>11.2.1</b> Overview</a></li>
<li class="chapter" data-level="11.2.2" data-path="the-netdiffuser-r-package.html"><a href="the-netdiffuser-r-package.html#datasets"><i class="fa fa-check"></i><b>11.2.2</b> Datasets</a></li>
<li class="chapter" data-level="11.2.3" data-path="the-netdiffuser-r-package.html"><a href="the-netdiffuser-r-package.html#visualization-methods"><i class="fa fa-check"></i><b>11.2.3</b> Visualization methods</a></li>
<li class="chapter" data-level="11.2.4" data-path="the-netdiffuser-r-package.html"><a href="the-netdiffuser-r-package.html#problems"><i class="fa fa-check"></i><b>11.2.4</b> Problems</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="simulation-of-diffusion-processes.html"><a href="simulation-of-diffusion-processes.html"><i class="fa fa-check"></i><b>11.3</b> Simulation of diffusion processes</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="simulation-of-diffusion-processes.html"><a href="simulation-of-diffusion-processes.html#simulating-diffusion-networks"><i class="fa fa-check"></i><b>11.3.1</b> Simulating diffusion networks</a></li>
<li class="chapter" data-level="11.3.2" data-path="simulation-of-diffusion-processes.html"><a href="simulation-of-diffusion-processes.html#rumor-spreading"><i class="fa fa-check"></i><b>11.3.2</b> Rumor spreading</a></li>
<li class="chapter" data-level="11.3.3" data-path="simulation-of-diffusion-processes.html"><a href="simulation-of-diffusion-processes.html#difussion"><i class="fa fa-check"></i><b>11.3.3</b> Difussion</a></li>
<li class="chapter" data-level="11.3.4" data-path="simulation-of-diffusion-processes.html"><a href="simulation-of-diffusion-processes.html#mentor-matching"><i class="fa fa-check"></i><b>11.3.4</b> Mentor Matching</a></li>
<li class="chapter" data-level="11.3.5" data-path="simulation-of-diffusion-processes.html"><a href="simulation-of-diffusion-processes.html#example-by-changing-threshold"><i class="fa fa-check"></i><b>11.3.5</b> Example by changing threshold</a></li>
<li class="chapter" data-level="11.3.6" data-path="simulation-of-diffusion-processes.html"><a href="simulation-of-diffusion-processes.html#problems-1"><i class="fa fa-check"></i><b>11.3.6</b> Problems</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="statistical-inference.html"><a href="statistical-inference.html"><i class="fa fa-check"></i><b>11.4</b> Statistical inference</a>
<ul>
<li class="chapter" data-level="11.4.1" data-path="statistical-inference.html"><a href="statistical-inference.html#morans-i"><i class="fa fa-check"></i><b>11.4.1</b> Moran’s I</a></li>
<li class="chapter" data-level="11.4.2" data-path="statistical-inference.html"><a href="statistical-inference.html#using-geodesics"><i class="fa fa-check"></i><b>11.4.2</b> Using geodesics</a></li>
<li class="chapter" data-level="11.4.3" data-path="statistical-inference.html"><a href="statistical-inference.html#structural-dependence-and-permutation-tests"><i class="fa fa-check"></i><b>11.4.3</b> Structural dependence and permutation tests</a></li>
<li class="chapter" data-level="11.4.4" data-path="statistical-inference.html"><a href="statistical-inference.html#idea"><i class="fa fa-check"></i><b>11.4.4</b> Idea</a></li>
<li class="chapter" data-level="11.4.5" data-path="statistical-inference.html"><a href="statistical-inference.html#regression-analysis"><i class="fa fa-check"></i><b>11.4.5</b> Regression analysis</a></li>
<li class="chapter" data-level="11.4.6" data-path="statistical-inference.html"><a href="statistical-inference.html#problems-2"><i class="fa fa-check"></i><b>11.4.6</b> Problems</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="stochastic-actor-oriented-models.html"><a href="stochastic-actor-oriented-models.html"><i class="fa fa-check"></i><b>12</b> Stochastic Actor Oriented Models</a></li>
<li class="chapter" data-level="13" data-path="power-calculation-in-network-studies.html"><a href="power-calculation-in-network-studies.html"><i class="fa fa-check"></i><b>13</b> Power calculation in network studies</a>
<ul>
<li class="chapter" data-level="13.1" data-path="example-1-spillover-effects-in-egocentric-studiescredit-ego-power.html"><a href="example-1-spillover-effects-in-egocentric-studiescredit-ego-power.html"><i class="fa fa-check"></i><b>13.1</b> Example 1: Spillover effects in egocentric studies</a></li>
<li class="chapter" data-level="13.2" data-path="example-2-spillover-effects-pre-post-effect.html"><a href="example-2-spillover-effects-pre-post-effect.html"><i class="fa fa-check"></i><b>13.2</b> Example 2: Spillover effects pre-post effect</a></li>
<li class="chapter" data-level="13.3" data-path="example-3-first-difference.html"><a href="example-3-first-difference.html"><i class="fa fa-check"></i><b>13.3</b> Example 3: First difference</a></li>
</ul></li>
<li class="part"><span><b>II Statistical Foundations</b></span></li>
<li class="chapter" data-level="14" data-path="bayes-rule.html"><a href="bayes-rule.html"><i class="fa fa-check"></i><b>14</b> Bayes’ Rule</a></li>
<li class="chapter" data-level="15" data-path="markov-chain.html"><a href="markov-chain.html"><i class="fa fa-check"></i><b>15</b> Markov Chain</a>
<ul>
<li class="chapter" data-level="15.1" data-path="metropolis-algorithm.html"><a href="metropolis-algorithm.html"><i class="fa fa-check"></i><b>15.1</b> Metropolis Algorithm</a></li>
<li class="chapter" data-level="15.2" data-path="metropolis-hastings.html"><a href="metropolis-hastings.html"><i class="fa fa-check"></i><b>15.2</b> Metropolis-Hastings</a></li>
<li class="chapter" data-level="15.3" data-path="likelihood-free-mcmc.html"><a href="likelihood-free-mcmc.html"><i class="fa fa-check"></i><b>15.3</b> Likelihood-free MCMC</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="part2-power.html"><a href="part2-power.html"><i class="fa fa-check"></i><b>16</b> Power and sample size</a>
<ul>
<li class="chapter" data-level="16.1" data-path="error-types.html"><a href="error-types.html"><i class="fa fa-check"></i><b>16.1</b> Error types</a></li>
<li class="chapter" data-level="16.2" data-path="example-1-sample-size-for-a-proportion.html"><a href="example-1-sample-size-for-a-proportion.html"><i class="fa fa-check"></i><b>16.2</b> Example 1: Sample size for a proportion</a></li>
<li class="chapter" data-level="16.3" data-path="example-2-sample-size-for-a-proportion-vis.html"><a href="example-2-sample-size-for-a-proportion-vis.html"><i class="fa fa-check"></i><b>16.3</b> Example 2: Sample size for a proportion (vis)</a></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="datasets-1.html"><a href="datasets-1.html"><i class="fa fa-check"></i><b>A</b> Datasets</a>
<ul>
<li class="chapter" data-level="A.1" data-path="sns-data.html"><a href="sns-data.html"><i class="fa fa-check"></i><b>A.1</b> SNS data</a>
<ul>
<li class="chapter" data-level="A.1.1" data-path="sns-data.html"><a href="sns-data.html#about-the-data"><i class="fa fa-check"></i><b>A.1.1</b> About the data</a></li>
<li class="chapter" data-level="A.1.2" data-path="sns-data.html"><a href="sns-data.html#variables"><i class="fa fa-check"></i><b>A.1.2</b> Variables</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Applied Network Science with R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="visualizing-the-network" class="section level2 hasAnchor" number="9.4">
<h2><span class="header-section-number">9.4</span> Visualizing the network<a href="visualizing-the-network.html#visualizing-the-network" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We will focus on three different attributes that we can use for this visualization:
Node size, node shape, and node color. While there are no particular rules, some
ideas you can follow are:</p>
<ul>
<li><p><strong>Node size</strong> Use it to describe a continuous measurement. This feature is often
used to highlight important nodes, e.g., using one of the many available degree measurements.</p></li>
<li><p><strong>Node shape</strong> Shapes can be used to represent categorical values. A good figure
will not feature too many of them; less than four would make sense.</p></li>
<li><p><strong>Node color</strong> Like shapes, colors can be used to represent categorical values, so the
same idea applies. Furthermore, it is not crazy to use both shape and color to
represent the same feature.</p></li>
</ul>
<p>Notice that we have not talked about layout algorithms. The R packages to build
graphs usually have internal rules to decide what algorithm to use. We will discuss that
later on. Let’s start by size.</p>
<div id="vertex-size" class="section level3 hasAnchor" number="9.4.1">
<h3><span class="header-section-number">9.4.1</span> Vertex size<a href="visualizing-the-network.html#vertex-size" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Finding the right scale can be somewhat difficult. We
will draw the graph four times to see what size would be the best:</p>
<div class="sourceCode" id="cb261"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb261-1"><a href="visualizing-the-network.html#cb261-1" tabindex="-1"></a><span class="co"># Sized by indegree</span></span>
<span id="cb261-2"><a href="visualizing-the-network.html#cb261-2" tabindex="-1"></a>net_sim <span class="sc">%v%</span> <span class="st">&quot;indeg&quot;</span> <span class="ot">&lt;-</span> sna<span class="sc">::</span><span class="fu">degree</span>(net_sim, <span class="at">cmode =</span> <span class="st">&quot;indegree&quot;</span>)</span>
<span id="cb261-3"><a href="visualizing-the-network.html#cb261-3" tabindex="-1"></a></span>
<span id="cb261-4"><a href="visualizing-the-network.html#cb261-4" tabindex="-1"></a><span class="co"># Changing device config</span></span>
<span id="cb261-5"><a href="visualizing-the-network.html#cb261-5" tabindex="-1"></a>op <span class="ot">&lt;-</span> <span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">2</span>), <span class="at">mai =</span> <span class="fu">c</span>(.<span class="dv">1</span>, .<span class="dv">1</span>, .<span class="dv">1</span>, .<span class="dv">1</span>))</span>
<span id="cb261-6"><a href="visualizing-the-network.html#cb261-6" tabindex="-1"></a></span>
<span id="cb261-7"><a href="visualizing-the-network.html#cb261-7" tabindex="-1"></a><span class="co"># Plotting</span></span>
<span id="cb261-8"><a href="visualizing-the-network.html#cb261-8" tabindex="-1"></a>glayout <span class="ot">&lt;-</span> <span class="fu">gplot</span>(net_sim, <span class="at">vertex.cex =</span> (net_sim <span class="sc">%v%</span> <span class="st">&quot;indeg&quot;</span>) <span class="sc">*</span> <span class="dv">2</span>)</span>
<span id="cb261-9"><a href="visualizing-the-network.html#cb261-9" tabindex="-1"></a><span class="fu">gplot</span>(net_sim, <span class="at">vertex.cex =</span> net_sim <span class="sc">%v%</span> <span class="st">&quot;indeg&quot;</span>, <span class="at">coord =</span> glayout)</span>
<span id="cb261-10"><a href="visualizing-the-network.html#cb261-10" tabindex="-1"></a><span class="fu">gplot</span>(net_sim, <span class="at">vertex.cex =</span> (net_sim <span class="sc">%v%</span> <span class="st">&quot;indeg&quot;</span>)<span class="sc">/</span><span class="dv">2</span>, <span class="at">coord =</span> glayout)</span>
<span id="cb261-11"><a href="visualizing-the-network.html#cb261-11" tabindex="-1"></a><span class="fu">gplot</span>(net_sim, <span class="at">vertex.cex =</span> (net_sim <span class="sc">%v%</span> <span class="st">&quot;indeg&quot;</span>)<span class="sc">/</span><span class="dv">10</span>, <span class="at">coord =</span> glayout)</span></code></pre></div>
<p><img src="part-01-06-network-simulation-and-viz_files/figure-html/06-size-1.png" width="672" /></p>
<div class="sourceCode" id="cb262"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb262-1"><a href="visualizing-the-network.html#cb262-1" tabindex="-1"></a><span class="co"># Restoring device config</span></span>
<span id="cb262-2"><a href="visualizing-the-network.html#cb262-2" tabindex="-1"></a><span class="fu">par</span>(op)</span></code></pre></div>
<p>Line-by-line we did the following:</p>
<ol style="list-style-type: decimal">
<li><p><code>net_sim %v% "indeg" &lt;- degree(net_sim, cmode = "indegree")</code> Created a new
vertex attribute called indegree and assigned it to the network object.
The indegree is calculated using the <code>degree</code> function from the <code>sna</code>
package. Since <code>igraph</code> also has a <code>degree</code> function, we are making sure
that R uses <code>sna</code>’s and not <code>igraph</code>’s. The <code>package::function</code> notation
is useful for these cases.</p></li>
<li><p><code>op &lt;- par(mfrow = c(2, 2), mai = c(.1, .1, .1, .1))</code> This changes the
graphical device information to (a) <code>mfrow = c(2,2)</code> have a 2x2 grid by row,
meaning that new figures will be added left to right and then top to bottom,
and (b) set the margins in the figure to be 0.1 inches in all four sizes.</p></li>
<li><p><code>glayout &lt;- gplot(net_sim, vertex.cex = (net_sim %v% "indeg") * 2)</code> generating
the plot <strong>and</strong> recording the layout. The <code>gplot</code> function returns a matrix of
size <code># vertices</code> by 2 with the positions of the vertices. We are also passing the
<code>vertex.cex</code> argument, which we use to specify the size of each vertex. In our
case, we decided to size the vertices proportional to their indegree <em>times two</em>.</p></li>
<li><p><code>gplot(net_sim, vertex.cex = net_sim %v% "indeg", coord = glayout)</code>, again,
we are drawing the graph using the coordinates of the previous draw, but now
the vertices are half the size of the original figure.</p></li>
</ol>
<p>The other two calls are similar to four. If we used igraph, setting the
size can be more accessible thanks to the netdiffuseR R package. Let’s start by converting
our network to an igraph object with the R package <code>intergraph</code>.</p>
<div class="sourceCode" id="cb263"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb263-1"><a href="visualizing-the-network.html#cb263-1" tabindex="-1"></a><span class="fu">library</span>(intergraph)</span>
<span id="cb263-2"><a href="visualizing-the-network.html#cb263-2" tabindex="-1"></a><span class="fu">library</span>(igraph)</span>
<span id="cb263-3"><a href="visualizing-the-network.html#cb263-3" tabindex="-1"></a></span>
<span id="cb263-4"><a href="visualizing-the-network.html#cb263-4" tabindex="-1"></a><span class="co"># Converting the network object to an igraph object</span></span>
<span id="cb263-5"><a href="visualizing-the-network.html#cb263-5" tabindex="-1"></a>net_sim_i <span class="ot">&lt;-</span> <span class="fu">asIgraph</span>(net_sim)</span>
<span id="cb263-6"><a href="visualizing-the-network.html#cb263-6" tabindex="-1"></a></span>
<span id="cb263-7"><a href="visualizing-the-network.html#cb263-7" tabindex="-1"></a><span class="co"># Plotting with igraph</span></span>
<span id="cb263-8"><a href="visualizing-the-network.html#cb263-8" tabindex="-1"></a><span class="fu">plot</span>(</span>
<span id="cb263-9"><a href="visualizing-the-network.html#cb263-9" tabindex="-1"></a>  net_sim_i,</span>
<span id="cb263-10"><a href="visualizing-the-network.html#cb263-10" tabindex="-1"></a>  <span class="at">vertex.size =</span> netdiffuseR<span class="sc">::</span><span class="fu">rescale_vertex_igraph</span>(</span>
<span id="cb263-11"><a href="visualizing-the-network.html#cb263-11" tabindex="-1"></a>    <span class="at">vertex.size =</span> <span class="fu">V</span>(net_sim_i)<span class="sc">$</span>indeg,</span>
<span id="cb263-12"><a href="visualizing-the-network.html#cb263-12" tabindex="-1"></a>    <span class="at">minmax.relative.size =</span> <span class="fu">c</span>(.<span class="dv">01</span>, .<span class="dv">1</span>)</span>
<span id="cb263-13"><a href="visualizing-the-network.html#cb263-13" tabindex="-1"></a>  ), </span>
<span id="cb263-14"><a href="visualizing-the-network.html#cb263-14" tabindex="-1"></a>  <span class="at">layout       =</span> glayout,</span>
<span id="cb263-15"><a href="visualizing-the-network.html#cb263-15" tabindex="-1"></a>  <span class="at">vertex.label =</span> <span class="cn">NA</span></span>
<span id="cb263-16"><a href="visualizing-the-network.html#cb263-16" tabindex="-1"></a>)</span></code></pre></div>
<p><img src="part-01-06-network-simulation-and-viz_files/figure-html/06-size-netdiffuseR-1.png" width="672" /></p>
<p>We could also have tried netplot, which should make things easier and make a better use of the space:</p>
<div class="sourceCode" id="cb264"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb264-1"><a href="visualizing-the-network.html#cb264-1" tabindex="-1"></a><span class="fu">library</span>(netplot)</span>
<span id="cb264-2"><a href="visualizing-the-network.html#cb264-2" tabindex="-1"></a><span class="fu">nplot</span>(</span>
<span id="cb264-3"><a href="visualizing-the-network.html#cb264-3" tabindex="-1"></a>  net_sim, <span class="at">layout =</span> glayout,</span>
<span id="cb264-4"><a href="visualizing-the-network.html#cb264-4" tabindex="-1"></a>  <span class="at">vertex.color =</span> <span class="st">&quot;tomato&quot;</span>,</span>
<span id="cb264-5"><a href="visualizing-the-network.html#cb264-5" tabindex="-1"></a>  <span class="at">vertex.frame.color =</span> <span class="st">&quot;darkred&quot;</span></span>
<span id="cb264-6"><a href="visualizing-the-network.html#cb264-6" tabindex="-1"></a>  )</span></code></pre></div>
<p><img src="part-01-06-network-simulation-and-viz_files/figure-html/06-netplot1-1.png" width="672" /></p>
<p>With a good idea for size, we can now start looking into vertex color.</p>
</div>
<div id="vertex-color" class="section level3 hasAnchor" number="9.4.2">
<h3><span class="header-section-number">9.4.2</span> Vertex color<a href="visualizing-the-network.html#vertex-color" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>For the color, we will use vertex age. Although age is, by definition, continuous,
we only have three values for age. Because of this, we can treat age as categorical.
Instead of using <code>nplot</code> we will go ahead with <code>nplot_base</code>. As of this version of
the book, the <code>netplot</code> package does not have an easy way to add legends with the
core function, <code>nplot</code>; therefore, we use <code>nplot_base</code> which is compatible with
the R function <code>legend</code>, as we will now see:</p>
<div class="sourceCode" id="cb265"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb265-1"><a href="visualizing-the-network.html#cb265-1" tabindex="-1"></a><span class="co"># Specifying colors for each vertex</span></span>
<span id="cb265-2"><a href="visualizing-the-network.html#cb265-2" tabindex="-1"></a>vcolors_palette <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;10&quot;</span> <span class="ot">=</span> <span class="st">&quot;gray&quot;</span>, <span class="st">&quot;14&quot;</span> <span class="ot">=</span> <span class="st">&quot;tomato&quot;</span>, <span class="st">&quot;17&quot;</span> <span class="ot">=</span> <span class="st">&quot;steelblue&quot;</span>)</span>
<span id="cb265-3"><a href="visualizing-the-network.html#cb265-3" tabindex="-1"></a>vcolors <span class="ot">&lt;-</span> vcolors_palette[<span class="fu">as.character</span>(net_sim <span class="sc">%v%</span> <span class="st">&quot;age&quot;</span>)]</span>
<span id="cb265-4"><a href="visualizing-the-network.html#cb265-4" tabindex="-1"></a>net_sim <span class="sc">%v%</span> <span class="st">&quot;color&quot;</span> <span class="ot">&lt;-</span> vcolors</span>
<span id="cb265-5"><a href="visualizing-the-network.html#cb265-5" tabindex="-1"></a></span>
<span id="cb265-6"><a href="visualizing-the-network.html#cb265-6" tabindex="-1"></a><span class="co"># Plotting</span></span>
<span id="cb265-7"><a href="visualizing-the-network.html#cb265-7" tabindex="-1"></a><span class="fu">nplot_base</span>(</span>
<span id="cb265-8"><a href="visualizing-the-network.html#cb265-8" tabindex="-1"></a>  net_ig,</span>
<span id="cb265-9"><a href="visualizing-the-network.html#cb265-9" tabindex="-1"></a>  <span class="at">layout =</span> glayout,</span>
<span id="cb265-10"><a href="visualizing-the-network.html#cb265-10" tabindex="-1"></a>  <span class="at">vertex.color =</span> net_sim <span class="sc">%v%</span> <span class="st">&quot;color&quot;</span>,</span>
<span id="cb265-11"><a href="visualizing-the-network.html#cb265-11" tabindex="-1"></a>  )</span>
<span id="cb265-12"><a href="visualizing-the-network.html#cb265-12" tabindex="-1"></a></span>
<span id="cb265-13"><a href="visualizing-the-network.html#cb265-13" tabindex="-1"></a><span class="co"># Color legend</span></span>
<span id="cb265-14"><a href="visualizing-the-network.html#cb265-14" tabindex="-1"></a><span class="fu">legend</span>(</span>
<span id="cb265-15"><a href="visualizing-the-network.html#cb265-15" tabindex="-1"></a>  <span class="st">&quot;bottomright&quot;</span>,</span>
<span id="cb265-16"><a href="visualizing-the-network.html#cb265-16" tabindex="-1"></a>  <span class="at">legend =</span> <span class="fu">names</span>(vcolors_palette),</span>
<span id="cb265-17"><a href="visualizing-the-network.html#cb265-17" tabindex="-1"></a>  <span class="at">fill   =</span> vcolors_palette, </span>
<span id="cb265-18"><a href="visualizing-the-network.html#cb265-18" tabindex="-1"></a>  <span class="at">bty    =</span> <span class="st">&quot;n&quot;</span>,</span>
<span id="cb265-19"><a href="visualizing-the-network.html#cb265-19" tabindex="-1"></a>  <span class="at">title  =</span> <span class="st">&quot;Age&quot;</span></span>
<span id="cb265-20"><a href="visualizing-the-network.html#cb265-20" tabindex="-1"></a>  )</span></code></pre></div>
<p><img src="part-01-06-network-simulation-and-viz_files/figure-html/06-network-color-1.png" width="672" /></p>
<p>Line by line, this is what we just did:</p>
<ol style="list-style-type: decimal">
<li><p><code>vcolors &lt;- c("10" = "gray", "14" = "tomato", "17" = "steelblue")</code> we created
a character vector with three elements, <code>"gray"</code>, <code>"tomato"</code>, and <code>"blue"</code>.
Furthermore, the vector has names assigned to it, <code>"10"</code>, <code>"14"</code>, and <code>"17"</code>–
the ages we have in the network–so that we can access its
elements by indexing by name, e.g., if we type <code>vcolors["10"]</code> R returns
the value <code>"gray"</code>.</p></li>
<li><p><code>vcolors &lt;- vcolors[as.character(net_sim %v% "age")]</code> there are several things
going on in this line. First, we extract the attribute “age” from the network
using the <code>%v%</code> operator. We then transform the resulting vector from integer type
to a character type with the function <code>as.character</code>. Finally, using the resulting
<strong>character vector</strong> with values <code>"10", "14", "17", ...</code>, we retrieve values
from <code>vcolors</code> name-indexing. The resulting vector is of length equal to
the vertex count in the network.</p></li>
<li><p><code>net_sim %v% "color" &lt;- vcolors</code> creates a
new vertex attribute, <code>color</code>. The assigned value is the result from subsetting
<code>vcolors</code> by the ages of each vertex.</p></li>
<li><p><code>nplot_base(...</code> finally draws the network. We pass the previously computed
vertex coordinates and vertex colors with the new attribute <code>color</code>.</p></li>
<li><p><code>legend(...)</code> Let’s see one parameter at a time:</p>
<ol style="list-style-type: lower-alpha">
<li><p><code>"bottomright"</code> tells the overall position of the legend</p></li>
<li><p><code>legend = names(vcolors)</code> passes the actual legend (text); in our case
the ages of individuals.</p></li>
<li><p><code>fill   = vcolors</code> passes the colors associated with the text.</p></li>
<li><p><code>bty    = "n"</code> suppresses wrapping the legend within a box.</p></li>
<li><p><code>title  = "Age"</code> sets the title to be “Age”.</p></li>
</ol></li>
</ol>
</div>
<div id="vertex-shape" class="section level3 hasAnchor" number="9.4.3">
<h3><span class="header-section-number">9.4.3</span> Vertex shape<a href="visualizing-the-network.html#vertex-shape" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>For the color, we will use vertex age. Although age is, by definition, continuous,
we only have three values for age. Because of this, we can treat age as categorical.</p>
<div class="sourceCode" id="cb266"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb266-1"><a href="visualizing-the-network.html#cb266-1" tabindex="-1"></a><span class="co"># Specifying the shapes for each vertex</span></span>
<span id="cb266-2"><a href="visualizing-the-network.html#cb266-2" tabindex="-1"></a>vshape_list <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;white&quot;</span> <span class="ot">=</span> <span class="dv">15</span>, <span class="st">&quot;non-white&quot;</span> <span class="ot">=</span> <span class="dv">3</span>)</span>
<span id="cb266-3"><a href="visualizing-the-network.html#cb266-3" tabindex="-1"></a>vshape      <span class="ot">&lt;-</span> vshape_list[<span class="fu">as.character</span>(net_sim <span class="sc">%v%</span> <span class="st">&quot;race&quot;</span>)]</span>
<span id="cb266-4"><a href="visualizing-the-network.html#cb266-4" tabindex="-1"></a>net_sim <span class="sc">%v%</span> <span class="st">&quot;shape&quot;</span> <span class="ot">&lt;-</span> vshape</span>
<span id="cb266-5"><a href="visualizing-the-network.html#cb266-5" tabindex="-1"></a></span>
<span id="cb266-6"><a href="visualizing-the-network.html#cb266-6" tabindex="-1"></a><span class="co"># Plotting</span></span>
<span id="cb266-7"><a href="visualizing-the-network.html#cb266-7" tabindex="-1"></a><span class="fu">nplot_base</span>(</span>
<span id="cb266-8"><a href="visualizing-the-network.html#cb266-8" tabindex="-1"></a>  net_ig,</span>
<span id="cb266-9"><a href="visualizing-the-network.html#cb266-9" tabindex="-1"></a>  <span class="at">layout =</span> glayout,</span>
<span id="cb266-10"><a href="visualizing-the-network.html#cb266-10" tabindex="-1"></a>  <span class="at">vertex.color =</span> net_sim <span class="sc">%v%</span> <span class="st">&quot;color&quot;</span>,</span>
<span id="cb266-11"><a href="visualizing-the-network.html#cb266-11" tabindex="-1"></a>  <span class="at">vertex.nsides =</span> net_sim <span class="sc">%v%</span> <span class="st">&quot;shape&quot;</span></span>
<span id="cb266-12"><a href="visualizing-the-network.html#cb266-12" tabindex="-1"></a>  )</span>
<span id="cb266-13"><a href="visualizing-the-network.html#cb266-13" tabindex="-1"></a></span>
<span id="cb266-14"><a href="visualizing-the-network.html#cb266-14" tabindex="-1"></a><span class="co"># Color legend</span></span>
<span id="cb266-15"><a href="visualizing-the-network.html#cb266-15" tabindex="-1"></a><span class="fu">legend</span>(</span>
<span id="cb266-16"><a href="visualizing-the-network.html#cb266-16" tabindex="-1"></a>  <span class="st">&quot;bottomright&quot;</span>,</span>
<span id="cb266-17"><a href="visualizing-the-network.html#cb266-17" tabindex="-1"></a>  <span class="at">legend =</span> <span class="fu">names</span>(vcolors_palette),</span>
<span id="cb266-18"><a href="visualizing-the-network.html#cb266-18" tabindex="-1"></a>  <span class="at">fill   =</span> vcolors_palette, </span>
<span id="cb266-19"><a href="visualizing-the-network.html#cb266-19" tabindex="-1"></a>  <span class="at">bty    =</span> <span class="st">&quot;n&quot;</span>,</span>
<span id="cb266-20"><a href="visualizing-the-network.html#cb266-20" tabindex="-1"></a>  <span class="at">title  =</span> <span class="st">&quot;Age&quot;</span></span>
<span id="cb266-21"><a href="visualizing-the-network.html#cb266-21" tabindex="-1"></a>  )</span>
<span id="cb266-22"><a href="visualizing-the-network.html#cb266-22" tabindex="-1"></a></span>
<span id="cb266-23"><a href="visualizing-the-network.html#cb266-23" tabindex="-1"></a><span class="co"># Shape legend</span></span>
<span id="cb266-24"><a href="visualizing-the-network.html#cb266-24" tabindex="-1"></a><span class="fu">legend</span>(</span>
<span id="cb266-25"><a href="visualizing-the-network.html#cb266-25" tabindex="-1"></a>  <span class="st">&quot;bottomleft&quot;</span>,</span>
<span id="cb266-26"><a href="visualizing-the-network.html#cb266-26" tabindex="-1"></a>  <span class="at">legend =</span> <span class="fu">names</span>(vshape_list),</span>
<span id="cb266-27"><a href="visualizing-the-network.html#cb266-27" tabindex="-1"></a>  <span class="at">pch    =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>), </span>
<span id="cb266-28"><a href="visualizing-the-network.html#cb266-28" tabindex="-1"></a>  <span class="at">bty    =</span> <span class="st">&quot;n&quot;</span>,</span>
<span id="cb266-29"><a href="visualizing-the-network.html#cb266-29" tabindex="-1"></a>  <span class="at">title  =</span> <span class="st">&quot;Race&quot;</span></span>
<span id="cb266-30"><a href="visualizing-the-network.html#cb266-30" tabindex="-1"></a>  )</span></code></pre></div>
<p><img src="part-01-06-network-simulation-and-viz_files/figure-html/06-network-shape-1.png" width="672" /></p>
<p>Let’s now compare the figure to our original ERGM:</p>
<ol style="list-style-type: decimal">
<li><p><strong>Low density (<code>edges</code>)</strong> Without low density, the figure would be
a hairball.</p></li>
<li><p><strong>Race homophily (<code>nodematch("race")</code>)</strong> Although not surprisingly evident,
nodes tend to form small clusters by shape, which, in our model, represents
race.</p></li>
<li><p><strong>Structural balance (<code>ttriad</code>)</strong> A force, in this case, opposite to low
density, higher prevalence of transitive triads makes individuals cluster.</p></li>
<li><p><strong>Age homophily (<code>absdiff("age")</code>)</strong> This is the most prominent feature of
the graph. In it, nodes are clustered by age.</p></li>
</ol>
<p>Of the four features, <strong>age homophily</strong> is the one that stands out. Why is this
tha case? If we look again at the parameters used in the ERGM and how these
interact with vertices’ attributes, we will find the answer:</p>
<ul>
<li><p>The log-odds of a new race-homophilic tie are <span class="math inline">\(1\times\theta_{\mbox{race-homophily}} = 0.5\)</span>.</p></li>
<li><p>But, the log-odd of an age heterophilic tie between, say, 14 and 17 year
olds is <span class="math inline">\(|17-14|\theta_{\mbox{age-homophily}} = 3\times -0.5 = -1.5\)</span>.</p></li>
<li><p>Therefore, the effect of heterophily (which is just the opposite of homophily)
is significantly larger, actually three times in this case, than the race-homophily
effect.</p></li>
</ul>
<p>This observation becomes clear if we run another simulation with the same seed, but
adjusting for the maximum size the effect of age-homophily can take. A
quick-n-dirty way to achieve this is to re-run the simulation with the <code>nodematch</code>
term instead of the <code>absdiff</code> term. This way, we (a) explicitly operationalize
the term as homophily (before it was heterophily,) and (b) have both homophily
effects have the same influence in the model:</p>
<div class="sourceCode" id="cb267"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb267-1"><a href="visualizing-the-network.html#cb267-1" tabindex="-1"></a>net_sim2 <span class="ot">&lt;-</span> <span class="fu">simulate</span>(</span>
<span id="cb267-2"><a href="visualizing-the-network.html#cb267-2" tabindex="-1"></a>    net <span class="sc">~</span> edges <span class="sc">+</span></span>
<span id="cb267-3"><a href="visualizing-the-network.html#cb267-3" tabindex="-1"></a>    <span class="fu">nodematch</span>(<span class="st">&quot;race&quot;</span>) <span class="sc">+</span></span>
<span id="cb267-4"><a href="visualizing-the-network.html#cb267-4" tabindex="-1"></a>    ttriad <span class="sc">+</span></span>
<span id="cb267-5"><a href="visualizing-the-network.html#cb267-5" tabindex="-1"></a>    <span class="fu">nodematch</span>(<span class="st">&quot;age&quot;</span>),</span>
<span id="cb267-6"><a href="visualizing-the-network.html#cb267-6" tabindex="-1"></a>    <span class="at">coef =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">5</span>, .<span class="dv">5</span>, .<span class="dv">25</span>, .<span class="dv">5</span>) <span class="co"># This line changed</span></span>
<span id="cb267-7"><a href="visualizing-the-network.html#cb267-7" tabindex="-1"></a>    )</span></code></pre></div>
<p>Re-doing the plot. From the previous graph-drawing, only the graph structure
changed. The vertex attributes are the same so we can go ahead and re-use them.
Like I mentioned earlier, the <code>nplot_base</code> function currently supports <code>igraph</code>
objects, so we will use <code>intergraph::asIgraph</code> to make it work:</p>
<div class="sourceCode" id="cb268"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb268-1"><a href="visualizing-the-network.html#cb268-1" tabindex="-1"></a><span class="co"># Plotting</span></span>
<span id="cb268-2"><a href="visualizing-the-network.html#cb268-2" tabindex="-1"></a><span class="fu">nplot_base</span>(</span>
<span id="cb268-3"><a href="visualizing-the-network.html#cb268-3" tabindex="-1"></a>  <span class="fu">asIgraph</span>(net_sim2),</span>
<span id="cb268-4"><a href="visualizing-the-network.html#cb268-4" tabindex="-1"></a>  <span class="co"># We comment this out to allow for a new layout</span></span>
<span id="cb268-5"><a href="visualizing-the-network.html#cb268-5" tabindex="-1"></a>  <span class="co"># layout = glayout, </span></span>
<span id="cb268-6"><a href="visualizing-the-network.html#cb268-6" tabindex="-1"></a>  <span class="at">vertex.color =</span> net_sim <span class="sc">%v%</span> <span class="st">&quot;color&quot;</span>,</span>
<span id="cb268-7"><a href="visualizing-the-network.html#cb268-7" tabindex="-1"></a>  <span class="at">vertex.nsides =</span> net_sim <span class="sc">%v%</span> <span class="st">&quot;shape&quot;</span></span>
<span id="cb268-8"><a href="visualizing-the-network.html#cb268-8" tabindex="-1"></a>  )</span>
<span id="cb268-9"><a href="visualizing-the-network.html#cb268-9" tabindex="-1"></a></span>
<span id="cb268-10"><a href="visualizing-the-network.html#cb268-10" tabindex="-1"></a><span class="co"># Color legend</span></span>
<span id="cb268-11"><a href="visualizing-the-network.html#cb268-11" tabindex="-1"></a><span class="fu">legend</span>(</span>
<span id="cb268-12"><a href="visualizing-the-network.html#cb268-12" tabindex="-1"></a>  <span class="st">&quot;bottomright&quot;</span>,</span>
<span id="cb268-13"><a href="visualizing-the-network.html#cb268-13" tabindex="-1"></a>  <span class="at">legend =</span> <span class="fu">names</span>(vcolors_palette),</span>
<span id="cb268-14"><a href="visualizing-the-network.html#cb268-14" tabindex="-1"></a>  <span class="at">fill   =</span> vcolors_palette, </span>
<span id="cb268-15"><a href="visualizing-the-network.html#cb268-15" tabindex="-1"></a>  <span class="at">bty    =</span> <span class="st">&quot;n&quot;</span>,</span>
<span id="cb268-16"><a href="visualizing-the-network.html#cb268-16" tabindex="-1"></a>  <span class="at">title  =</span> <span class="st">&quot;Age&quot;</span></span>
<span id="cb268-17"><a href="visualizing-the-network.html#cb268-17" tabindex="-1"></a>  )</span>
<span id="cb268-18"><a href="visualizing-the-network.html#cb268-18" tabindex="-1"></a></span>
<span id="cb268-19"><a href="visualizing-the-network.html#cb268-19" tabindex="-1"></a><span class="co"># Shape legend</span></span>
<span id="cb268-20"><a href="visualizing-the-network.html#cb268-20" tabindex="-1"></a><span class="fu">legend</span>(</span>
<span id="cb268-21"><a href="visualizing-the-network.html#cb268-21" tabindex="-1"></a>  <span class="st">&quot;bottomleft&quot;</span>,</span>
<span id="cb268-22"><a href="visualizing-the-network.html#cb268-22" tabindex="-1"></a>  <span class="at">legend =</span> <span class="fu">names</span>(vshape_list),</span>
<span id="cb268-23"><a href="visualizing-the-network.html#cb268-23" tabindex="-1"></a>  <span class="at">pch    =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>), </span>
<span id="cb268-24"><a href="visualizing-the-network.html#cb268-24" tabindex="-1"></a>  <span class="at">bty    =</span> <span class="st">&quot;n&quot;</span>,</span>
<span id="cb268-25"><a href="visualizing-the-network.html#cb268-25" tabindex="-1"></a>  <span class="at">title  =</span> <span class="st">&quot;Race&quot;</span></span>
<span id="cb268-26"><a href="visualizing-the-network.html#cb268-26" tabindex="-1"></a>  )</span></code></pre></div>
<p><img src="part-01-06-network-simulation-and-viz_files/figure-html/06-adjust-homophily-plot-1.png" width="672" /></p>
<p>As expected, there is no longer a dominant effect in homophily. One important
thing we can learn from this final example is that phenomena will not always
show themselves in graph visualization. Careful analysis in complex networks
is a must.</p>

</div>
</div>
<!-- </div> -->
            </section>

          </div>
        </div>
      </div>
<a href="reading-a-network.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="hypothesis-testing-in-networks.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/gvegayon/appliedsnar/edit/master/part-01-06-network-simulation-and-viz.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/gvegayon/appliedsnar/blob/master/part-01-06-network-simulation-and-viz.Rmd",
"text": null
},
"download": ["appliedsnar.pdf", "appliedsnar.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
