\PassOptionsToPackage{unicode=true}{hyperref} % options for packages loaded elsewhere
\PassOptionsToPackage{hyphens}{url}
%
\documentclass[]{book}
\usepackage{lmodern}
\usepackage{amssymb,amsmath}
\usepackage{ifxetex,ifluatex}
\usepackage{fixltx2e} % provides \textsubscript
\ifnum 0\ifxetex 1\fi\ifluatex 1\fi=0 % if pdftex
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
  \usepackage{textcomp} % provides euro and other symbols
\else % if luatex or xelatex
  \usepackage{unicode-math}
  \defaultfontfeatures{Ligatures=TeX,Scale=MatchLowercase}
\fi
% use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
% use microtype if available
\IfFileExists{microtype.sty}{%
\usepackage[]{microtype}
\UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\IfFileExists{parskip.sty}{%
\usepackage{parskip}
}{% else
\setlength{\parindent}{0pt}
\setlength{\parskip}{6pt plus 2pt minus 1pt}
}
\usepackage{hyperref}
\hypersetup{
            pdftitle={Applied Network Science with R},
            pdfauthor={George G. Vega Yon},
            pdfborder={0 0 0},
            breaklinks=true}
\urlstyle{same}  % don't use monospace font for urls
\usepackage{color}
\usepackage{fancyvrb}
\newcommand{\VerbBar}{|}
\newcommand{\VERB}{\Verb[commandchars=\\\{\}]}
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
% Add ',fontsize=\small' for more characters per line
\usepackage{framed}
\definecolor{shadecolor}{RGB}{248,248,248}
\newenvironment{Shaded}{\begin{snugshade}}{\end{snugshade}}
\newcommand{\AlertTok}[1]{\textcolor[rgb]{0.94,0.16,0.16}{#1}}
\newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.77,0.63,0.00}{#1}}
\newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\BuiltInTok}[1]{#1}
\newcommand{\CharTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\CommentTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{#1}}
\newcommand{\DecValTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ErrorTok}[1]{\textcolor[rgb]{0.64,0.00,0.00}{\textbf{#1}}}
\newcommand{\ExtensionTok}[1]{#1}
\newcommand{\FloatTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ImportTok}[1]{#1}
\newcommand{\InformationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\NormalTok}[1]{#1}
\newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.81,0.36,0.00}{\textbf{#1}}}
\newcommand{\OtherTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{#1}}
\newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\RegionMarkerTok}[1]{#1}
\newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\StringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\VariableTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\WarningTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\usepackage{longtable,booktabs}
% Fix footnotes in tables (requires footnote package)
\IfFileExists{footnote.sty}{\usepackage{footnote}\makesavenoteenv{longtable}}{}
\usepackage{graphicx,grffile}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
\usepackage[normalem]{ulem}
% avoid problems with \sout in headers with hyperref:
\pdfstringdefDisableCommands{\renewcommand{\sout}{}}
\setlength{\emergencystretch}{3em}  % prevent overfull lines
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
\setcounter{secnumdepth}{5}
% Redefines (sub)paragraphs to behave more like sections
\ifx\paragraph\undefined\else
\let\oldparagraph\paragraph
\renewcommand{\paragraph}[1]{\oldparagraph{#1}\mbox{}}
\fi
\ifx\subparagraph\undefined\else
\let\oldsubparagraph\subparagraph
\renewcommand{\subparagraph}[1]{\oldsubparagraph{#1}\mbox{}}
\fi

% set default figure placement to htbp
\makeatletter
\def\fps@figure{htbp}
\makeatother

\usepackage{booktabs}
\usepackage{hyperref}
  \hypersetup{allcolors=blue, colorlinks=true}

\usepackage{apacite}
\usepackage{setspace}
\onehalfspacing

\usepackage{arev}
\usepackage[T1]{fontenc}

\usepackage[margin=1in]{geometry}

\title{Applied Network Science with R}
\author{George G. Vega Yon}
\date{2022-06-23}

\begin{document}
\maketitle

{
\setcounter{tocdepth}{1}
\tableofcontents
}
\hypertarget{about}{%
\chapter{About}\label{about}}

Placeholder

\hypertarget{the-book}{%
\subsection{The Book}\label{the-book}}

\hypertarget{the-author}{%
\subsection{The author}\label{the-author}}

\hypertarget{part-applications}{%
\part{Applications}\label{part-applications}}

\hypertarget{introduction}{%
\chapter{Introduction}\label{introduction}}

Social Network Analysis and Network Science, have a long scholarly tradition.
From social diffusion models to protein-interaction networks, these complex-systems
disciplines cover a wide range of problems across scientific fields. Yet, although
these could be seen as wildly different, the object under the microscope is the
same, networks.

With a long history (and insufficient levels of inter-discipline collaboration,
if you allow me to say) of scientific advances happing in a somewhat isolated
fashion, the potential of cross-pollination between disciplines within network
science is immense.

This book is an attempt to compile the many methods available in the realm of
complexity sciences, provide an in-depth mathematical examination--when possible--,
and provide a few examples illustrating their usage.

\hypertarget{r-basics}{%
\chapter{R Basics}\label{r-basics}}

Placeholder

\hypertarget{what-is-r}{%
\section{What is R}\label{what-is-r}}

\hypertarget{how-to-install-packages}{%
\section{How to install packages}\label{how-to-install-packages}}

\hypertarget{prerequisits}{%
\section{Prerequisits}\label{prerequisits}}

\hypertarget{a-gentle-quick-n-dirty-introduction-to-r}{%
\section{\texorpdfstring{A \sout{gentle} Quick n' Dirty Introduction to R}{A gentle Quick n' Dirty Introduction to R}}\label{a-gentle-quick-n-dirty-introduction-to-r}}

\hypertarget{network-nomination-data}{%
\chapter{Network Nomination Data}\label{network-nomination-data}}

Placeholder

\hypertarget{data-preprocessing}{%
\section{Data preprocessing}\label{data-preprocessing}}

\hypertarget{reading-the-data-into-r}{%
\subsection{Reading the data into R}\label{reading-the-data-into-r}}

\hypertarget{creating-a-unique-id-for-each-participant}{%
\subsection{Creating a unique id for each participant}\label{creating-a-unique-id-for-each-participant}}

\hypertarget{creating-a-network}{%
\section{Creating a network}\label{creating-a-network}}

\hypertarget{from-survey-to-edgelist}{%
\subsection{From survey to edgelist}\label{from-survey-to-edgelist}}

\hypertarget{igraph-network}{%
\subsection{igraph network}\label{igraph-network}}

\hypertarget{network-descriptive-stats}{%
\section{Network descriptive stats}\label{network-descriptive-stats}}

\hypertarget{plotting-the-network-in-igraph}{%
\section{Plotting the network in igraph}\label{plotting-the-network-in-igraph}}

\hypertarget{single-plot}{%
\subsection{Single plot}\label{single-plot}}

\hypertarget{multiple-plots}{%
\subsection{Multiple plots}\label{multiple-plots}}

\hypertarget{statistical-tests}{%
\section{Statistical tests}\label{statistical-tests}}

\hypertarget{is-nomination-number-correlated-with-indegree}{%
\subsection{Is nomination number correlated with indegree?}\label{is-nomination-number-correlated-with-indegree}}

\hypertarget{exponential-random-graph-models}{%
\chapter{Exponential Random Graph Models}\label{exponential-random-graph-models}}

Placeholder

\hypertarget{a-nauxefve-example}{%
\section{A na√Øve example}\label{a-nauxefve-example}}

\hypertarget{estimation-of-ergms}{%
\section{Estimation of ERGMs}\label{estimation-of-ergms}}

\hypertarget{the-ergm-package}{%
\section{\texorpdfstring{The \texttt{ergm} package}{The ergm package}}\label{the-ergm-package}}

\hypertarget{running-ergms}{%
\section{Running ERGMs}\label{running-ergms}}

\hypertarget{model-goodness-of-fit}{%
\section{Model Goodness-of-Fit}\label{model-goodness-of-fit}}

\hypertarget{more-on-mcmc-convergence}{%
\section{More on MCMC convergence}\label{more-on-mcmc-convergence}}

\hypertarget{mathematical-interpretation}{%
\section{Mathematical Interpretation}\label{mathematical-interpretation}}

\hypertarget{markov-independence}{%
\section{Markov independence}\label{markov-independence}}

\hypertarget{using-constraints-in-ergms}{%
\chapter{Using constraints in ERGMs}\label{using-constraints-in-ergms}}

Placeholder

\hypertarget{example-1-interlocking-egos-and-disconnected-alters}{%
\section{Example 1: Interlocking egos and disconnected alters}\label{example-1-interlocking-egos-and-disconnected-alters}}

\hypertarget{example-2-bi-partite-networks}{%
\section{Example 2: Bi-partite networks}\label{example-2-bi-partite-networks}}

\hypertarget{separable-temporal-exponential-family-random-graph-models}{%
\chapter{(Separable) Temporal Exponential Family Random Graph Models}\label{separable-temporal-exponential-family-random-graph-models}}

This tutorial is great! \url{https://statnet.org/trac/raw-attachment/wiki/Sunbelt2016/tergm_tutorial.pdf}

\hypertarget{simulating-and-visualizing-networks}{%
\chapter{Simulating and visualizing networks}\label{simulating-and-visualizing-networks}}

In this chapter, we will build and visualize artificial networks using Exponential
Random Graph Models {[}ERGMs.{]} Together with chapter 3, this will be an extended
example of how to read network data and visualize it using some of the available
R packages out there.

For this chapter we will be using the following R packages: \texttt{ergm}, \texttt{sna}, \texttt{igraph},
\texttt{intergraph}, \texttt{netplot}, \texttt{netdiffuseR}, and \texttt{rgexf}.

\hypertarget{random-graph-models}{%
\section{Random Graph Models}\label{random-graph-models}}

While there are tons of social network data, we will use an artificial one for this chapter.
We do this as it is always helpful to have more examples simulating Random
networks. For this chapter, we will classify random graph models for sampling and
generating networks into three categories:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  \textbf{Exogenous}: Graphs where the structure is determined by a macro rule, e.g.,
  expected density, degree distribution, or degree-sequence. In these cases,
  ties are assigned to comply with a macro-property.
\item
  \textbf{Endogenous}: This category includes all Random Graphs generated based
  on endogenous information, e.g., small-world, scale-free, etc. Here, a tie
  creation rule gives origin to a macro property, for example, preferential attachment
  in scale-free networks.
\item
  \textbf{Exponential Random Graph Models}: Overall, since ERGMs compose a family
  of statistical models, we can always (or almost always) find a model specification
  that matches the previous categories. Whereas we are thinking about degree sequence,
  preferential attachment, or a mix of both, ERGMs can be the baseline for any of
  those models.
\end{enumerate}

The later, ERGMs, are a generalization that covers all classes. Because of that,
we will use ERGMs to generate our artificial network.

\hypertarget{social-networks-in-schools}{%
\section{Social Networks in Schools}\label{social-networks-in-schools}}

A common type of network we analyze is friendship networks. In this case,
we will use ERGMs to simulate friendship networks within a school. In our
simulated world, these networks will be dominated by the following phenomena

\begin{itemize}
\tightlist
\item
  Low density,
\item
  Race homophily,
\item
  Structural balance,
\item
  And age homophily.
\end{itemize}

If you have been paying attention to the previous chapters, you will notice that,
out of these five properties, only one constitutes Markov graphs. Within a tie,
homophily and density only depend on ego and alter. In race homophily, only ego
and alter's race matter for the tie formation, but, in the case of Structural
balance, ego is more likely to befriend alter if a fried of ego is friends with alter,
i.e., ``the friend of my friend is my friend.''

The simulation steps are as follows:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  Draw a population of \(n\) students and randomly distribute race and age across them.
\item
  Create a \texttt{network} object.
\item
  Simulate the ties in the empty network.
\end{enumerate}

Here is the code

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{set.seed}\NormalTok{(}\DecValTok{712}\NormalTok{)}
\NormalTok{n <-}\StringTok{ }\DecValTok{200}

\CommentTok{# Step 1: Students}
\NormalTok{race   <-}\StringTok{ }\KeywordTok{sample}\NormalTok{(}\KeywordTok{c}\NormalTok{(}\StringTok{"white"}\NormalTok{, }\StringTok{"non-white"}\NormalTok{), n, }\DataTypeTok{replace =} \OtherTok{TRUE}\NormalTok{)}
\NormalTok{age    <-}\StringTok{ }\KeywordTok{sample}\NormalTok{(}\KeywordTok{c}\NormalTok{(}\DecValTok{10}\NormalTok{, }\DecValTok{14}\NormalTok{, }\DecValTok{17}\NormalTok{), n, }\DataTypeTok{replace =} \OtherTok{TRUE}\NormalTok{)}

\CommentTok{# Step 2: Create an empty network}
\KeywordTok{library}\NormalTok{(ergm)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Loading required package: network
\end{verbatim}

\begin{verbatim}
## 
## 'network' 1.17.2 (2022-05-20), part of the Statnet Project
## * 'news(package="network")' for changes since last version
## * 'citation("network")' for citation information
## * 'https://statnet.org' for help, support, and other information
\end{verbatim}

\begin{verbatim}
## 
## 'ergm' 4.2.1 (2022-05-10), part of the Statnet Project
## * 'news(package="ergm")' for changes since last version
## * 'citation("ergm")' for citation information
## * 'https://statnet.org' for help, support, and other information
\end{verbatim}

\begin{verbatim}
## 'ergm' 4 is a major update that introduces some backwards-incompatible
## changes. Please type 'news(package="ergm")' for a list of major
## changes.
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{library}\NormalTok{(network)}
\NormalTok{net <-}\StringTok{ }\KeywordTok{network.initialize}\NormalTok{(n)}

\NormalTok{net }\OperatorTok{%v%}\StringTok{ "race"}\NormalTok{   <-}\StringTok{ }\NormalTok{race}
\NormalTok{net }\OperatorTok{%v%}\StringTok{ "age"}\NormalTok{    <-}\StringTok{ }\NormalTok{age}

\CommentTok{# Step 3: Simulate a graph}
\NormalTok{net_sim <-}\StringTok{ }\KeywordTok{simulate}\NormalTok{(}
\NormalTok{    net }\OperatorTok{~}\StringTok{ }\NormalTok{edges }\OperatorTok{+}
\StringTok{    }\KeywordTok{nodematch}\NormalTok{(}\StringTok{"race"}\NormalTok{) }\OperatorTok{+}
\StringTok{    }\NormalTok{triangle }\OperatorTok{+}
\StringTok{    }\KeywordTok{absdiff}\NormalTok{(}\StringTok{"age"}\NormalTok{),}
    \DataTypeTok{coef =} \KeywordTok{c}\NormalTok{(}\OperatorTok{-}\DecValTok{4}\NormalTok{, }\FloatTok{.5}\NormalTok{, }\FloatTok{.5}\NormalTok{, }\FloatTok{-.5}\NormalTok{)}
\NormalTok{    )}
\end{Highlighting}
\end{Shaded}

What just happened? Here is a line-by-line breakout:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  \texttt{set.seed(712)} Since this is a random simulation, we need to fix a seed so it is reproducible. Otherwise, results would change with every iteration.
\item
  \texttt{n\ \textless{}-\ 200} We are assigning the value \texttt{200} to the object \texttt{n}. This will make things easier as, if needed, changing the size of the networks can be done at the top of the code.
\item
  \texttt{race\ \textless{}-\ sample(c("white",\ "non-white"),\ n,\ replace\ =\ TRUE)} We are sampling 200, or actually, \texttt{n} values from the vector \texttt{c("white",\ "non-white")} with replacement.
\item
  \texttt{age\ \textless{}-\ sample(c(10,\ 14,\ 17),\ n,\ replace\ =\ TRUE)} Same as before, but with ages!
\item
  \texttt{library(ergm)} Loading the ergm R package, which we need to simulate the networks!
\item
  \texttt{library(network)} Loading the \texttt{network} R package, which we need to create the empty graph.
\item
  \texttt{net\ \textless{}-\ network.initialize(n)} Creating an empty graph of size \texttt{n}.
\item
  \texttt{net\ \%v\%\ "race"\ \textless{}-\ race} Using the \texttt{\%v\%} operator, we can access vertices features in the network object. Since race does not exist in the network yet, the operator just creates it. Notice that the number of vertices matches the length of the race vector.
\item
  \texttt{net\ \%v\%\ "age"\ \textless{}-\ age} Same as with race!
\item
  \texttt{net\_sim\ \textless{}-\ simulate(} Simulating an ERGM!
\end{enumerate}

Let's take a quick look at the resulting graph

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{library}\NormalTok{(sna)}
\KeywordTok{gplot}\NormalTok{(net_sim)}
\end{Highlighting}
\end{Shaded}

\includegraphics{06-network-simulation-and-viz_files/figure-latex/06-first-fig-1.pdf}

We can now start to see whether we got what we wanted! Before that, let's save the
network as a plain-text file so we can practice reading networks back in R!

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{write.csv}\NormalTok{(}\KeywordTok{as.edgelist}\NormalTok{(net_sim), }\DataTypeTok{file =} \StringTok{"06-edgelist.csv"}\NormalTok{)}
\KeywordTok{write.csv}\NormalTok{(}\KeywordTok{as.data.frame}\NormalTok{(net_sim, }\DataTypeTok{unit =} \StringTok{"vertices"}\NormalTok{), }\DataTypeTok{file =} \StringTok{"06-nodes.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\hypertarget{reading-a-network}{%
\section{Reading a network}\label{reading-a-network}}

The first step to analyzing network data is to read it in. Many times you'll find
data in the form of an adjacency matrix. Other times, data will come in the form
of an edgelist. Another common format is the adjacency list, which is a compressed
version of an edgelist. Let's see how the formats look like for the following
network:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{example_graph <-}\StringTok{ }\KeywordTok{matrix}\NormalTok{(0L, }\DecValTok{4}\NormalTok{, }\DecValTok{4}\NormalTok{, }\DataTypeTok{dimnames =} \KeywordTok{list}\NormalTok{(letters[}\DecValTok{1}\OperatorTok{:}\DecValTok{4}\NormalTok{], letters[}\DecValTok{1}\OperatorTok{:}\DecValTok{4}\NormalTok{]))}
\NormalTok{example_graph[}\KeywordTok{c}\NormalTok{(}\DecValTok{2}\NormalTok{, }\DecValTok{7}\NormalTok{)] <-}\StringTok{ }\NormalTok{1L}
\NormalTok{example_graph[}\StringTok{"c"}\NormalTok{, }\StringTok{"d"}\NormalTok{] <-}\StringTok{ }\NormalTok{1L}
\NormalTok{example_graph[}\StringTok{"d"}\NormalTok{, }\StringTok{"c"}\NormalTok{] <-}\StringTok{ }\NormalTok{1L}
\NormalTok{example_graph <-}\StringTok{ }\KeywordTok{as.network}\NormalTok{(example_graph)}
\KeywordTok{set.seed}\NormalTok{(}\DecValTok{1231}\NormalTok{)}
\KeywordTok{gplot}\NormalTok{(example_graph, }\DataTypeTok{label =}\NormalTok{ letters[}\DecValTok{1}\OperatorTok{:}\DecValTok{4}\NormalTok{])}
\end{Highlighting}
\end{Shaded}

\includegraphics{06-network-simulation-and-viz_files/figure-latex/06-fake-graph-read-1.pdf}

\begin{itemize}
\tightlist
\item
  \textbf{Adjacency matrix} a matrix of size \(n\) by \(n\) where the \(ij\)-th entry represents
  the tie between \(i\) and \(j\). In a directed network, we say \(i\) connects to \(j\),
  so the \(i\)-th row shows the ties \(i\) sends to the rest of the network. Likewise,
  in a directed graph, the \(j\)-th column shows the ties sent to \(j\). For undirected
  graphs, the adjacency matrix is usually upper or lower diagonal. The adjacency
  matrix of an undirected graph is symmetric, so we don't need to report the same
  information twice. For example:
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{as.matrix}\NormalTok{(example_graph)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##   a b c d
## a 0 0 0 0
## b 1 0 0 0
## c 0 1 0 1
## d 0 0 1 0
\end{verbatim}

\begin{itemize}
\tightlist
\item
  \textbf{Edge list} a matrix of size \(|E|\) by \(2\), where \(|E|\) is the number of edges.
  Each entry represents a tie in the graph.
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{as.edgelist}\NormalTok{(example_graph)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##      [,1] [,2]
## [1,]    2    1
## [2,]    3    2
## [3,]    3    4
## [4,]    4    3
## attr(,"n")
## [1] 4
## attr(,"vnames")
## [1] "a" "b" "c" "d"
## attr(,"directed")
## [1] TRUE
## attr(,"bipartite")
## [1] FALSE
## attr(,"loops")
## [1] FALSE
## attr(,"class")
## [1] "matrix_edgelist" "edgelist"        "matrix"          "array"
\end{verbatim}

\begin{itemize}
\tightlist
\item
  \textbf{Adjacency list} a list of vectors of at most size \(n\).
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{igraph}\OperatorTok{::}\KeywordTok{as_adj_list}\NormalTok{(intergraph}\OperatorTok{::}\KeywordTok{asIgraph}\NormalTok{(example_graph)) }\OperatorTok{|}\ErrorTok{>}
\StringTok{  }\KeywordTok{lapply}\NormalTok{(\textbackslash{}(x) }\KeywordTok{as.vector}\NormalTok{(x))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [[1]]
## [1] 2
## 
## [[2]]
## [1] 1 3
## 
## [[3]]
## [1] 2 4 4
## 
## [[4]]
## [1] 3 3
\end{verbatim}

Here we will deal with an edgelist that includes node information.
In my opinion, this is one of the best ways to share network data.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{edges <-}\StringTok{ }\KeywordTok{read.csv}\NormalTok{(}\StringTok{"06-edgelist.csv"}\NormalTok{)}
\NormalTok{nodes <-}\StringTok{ }\KeywordTok{read.csv}\NormalTok{(}\StringTok{"06-nodes.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

Using igraph

Using \texttt{network}

\hypertarget{visualizing-the-network}{%
\section{Visualizing the network}\label{visualizing-the-network}}

We will focus on three different attributes that we can use for this visualization:
Node size, node shape, and node color. While there are no particular rules, some
ideas you can follow are:

\begin{itemize}
\item
  \textbf{Node size} Use it to describe a continuous measurement. This feature is often
  used to highlight important nodes, e.g., using one of the many available degree measurements.
\item
  \textbf{Node shape} Shapes can be used to represent categorical values. A good figure
  will not feature too many of them; less than four would make sense.
\item
  \textbf{Node color} Like shapes, colors can be used to represent categorical values, so the
  same idea applies. Furthermore, it is not crazy to use both shape and color to
  represent the same feature.
\end{itemize}

Notice that we have not talked about layout algorithms. The R packages to build
graphs usually have internal rules to decide what algorithm to use. We will discuss that
later on. Let's start by size. Finding the right scale can be somewhat difficult. We
will draw the graph four times to see what size would be the best:

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{# Sized by indegree}
\NormalTok{net_sim }\OperatorTok{%v%}\StringTok{ "indeg"}\NormalTok{ <-}\StringTok{ }\KeywordTok{degree}\NormalTok{(net_sim, }\DataTypeTok{gmode =} \StringTok{"digraph"}\NormalTok{)}

\CommentTok{# Preparing the graphical device to hold four nets.}
\CommentTok{# This line sets a 2 x 2 viz device and stores the }
\CommentTok{# original value. We will use the `op` object to reset}
\CommentTok{# the configugarion}
\NormalTok{op <-}\StringTok{ }\KeywordTok{par}\NormalTok{(}\DataTypeTok{mfrow =} \KeywordTok{c}\NormalTok{(}\DecValTok{2}\NormalTok{, }\DecValTok{2}\NormalTok{), }\DataTypeTok{mai =} \KeywordTok{c}\NormalTok{(.}\DecValTok{1}\NormalTok{, }\FloatTok{.1}\NormalTok{, }\FloatTok{.1}\NormalTok{, }\FloatTok{.1}\NormalTok{))}
\KeywordTok{gplot}\NormalTok{(net_sim, }\DataTypeTok{vertex.cex =}\NormalTok{ (net_sim }\OperatorTok{%v%}\StringTok{ "indeg"}\NormalTok{) }\OperatorTok{*}\StringTok{ }\DecValTok{2}\NormalTok{)}
\KeywordTok{gplot}\NormalTok{(net_sim, }\DataTypeTok{vertex.cex =}\NormalTok{ net_sim }\OperatorTok{%v%}\StringTok{ "indeg"}\NormalTok{)}
\KeywordTok{gplot}\NormalTok{(net_sim, }\DataTypeTok{vertex.cex =}\NormalTok{ (net_sim }\OperatorTok{%v%}\StringTok{ "indeg"}\NormalTok{)}\OperatorTok{/}\DecValTok{2}\NormalTok{)}
\KeywordTok{gplot}\NormalTok{(net_sim, }\DataTypeTok{vertex.cex =}\NormalTok{ (net_sim }\OperatorTok{%v%}\StringTok{ "indeg"}\NormalTok{)}\OperatorTok{/}\DecValTok{10}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics{06-network-simulation-and-viz_files/figure-latex/06-size-1.pdf}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{par}\NormalTok{(op)}
\end{Highlighting}
\end{Shaded}

If we were using igraph, setting the size can be easier thanks to the netdiffuseR
R package. Let's start by converting our network to an igraph object with the
R package \texttt{intergraph}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{library}\NormalTok{(intergraph)}
\KeywordTok{library}\NormalTok{(igraph)}

\CommentTok{# Converting the network object to an igraph object}
\NormalTok{net_sim_i <-}\StringTok{ }\KeywordTok{asIgraph}\NormalTok{(net_sim)}

\CommentTok{# Plotting with igraph}
\KeywordTok{plot}\NormalTok{(}
\NormalTok{  net_sim_i,}
  \DataTypeTok{vertex.size =}\NormalTok{ netdiffuseR}\OperatorTok{::}\KeywordTok{rescale_vertex_igraph}\NormalTok{(}
    \DataTypeTok{vertex.size =} \KeywordTok{V}\NormalTok{(net_sim_i)}\OperatorTok{$}\NormalTok{indeg,}
    \DataTypeTok{minmax.relative.size =} \KeywordTok{c}\NormalTok{(.}\DecValTok{01}\NormalTok{, }\FloatTok{.1}\NormalTok{)}
\NormalTok{  )}
\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics{06-network-simulation-and-viz_files/figure-latex/06-size-netdiffuseR-1.pdf}

We could also have tried netplot, which should make things easier (and prettier):

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{library}\NormalTok{(netplot)}
\KeywordTok{nplot}\NormalTok{(net_sim)}
\end{Highlighting}
\end{Shaded}

\includegraphics{06-network-simulation-and-viz_files/figure-latex/06-netplot1-1.pdf}

\hypertarget{hypothesis-testing-in-networks}{%
\chapter{Hypothesis testing in networks}\label{hypothesis-testing-in-networks}}

Placeholder

\hypertarget{comparing-networks}{%
\section{Comparing networks}\label{comparing-networks}}

\hypertarget{network-bootstrap}{%
\subsection{Network bootstrap}\label{network-bootstrap}}

\hypertarget{when-the-statistic-is-normal}{%
\subsection{When the statistic is normal}\label{when-the-statistic-is-normal}}

\hypertarget{when-the-statistic-is-not-normal}{%
\subsection{When the statistic is NOT normal}\label{when-the-statistic-is-not-normal}}

\hypertarget{examples}{%
\section{Examples}\label{examples}}

\hypertarget{average-of-node-level-stats}{%
\subsection{Average of node-level stats}\label{average-of-node-level-stats}}

\hypertarget{network-diffussion-with-netdiffuser}{%
\chapter{\texorpdfstring{Network diffussion with \texttt{netdiffuseR}}{Network diffussion with netdiffuseR}}\label{network-diffussion-with-netdiffuser}}

Placeholder

\hypertarget{network-diffusion-of-innovation}{%
\section{Network diffusion of innovation}\label{network-diffusion-of-innovation}}

\hypertarget{diffusion-networks}{%
\subsection{Diffusion networks}\label{diffusion-networks}}

\hypertarget{thresholds}{%
\subsection{Thresholds}\label{thresholds}}

\hypertarget{the-netdiffuser-r-package}{%
\section{The netdiffuseR R package}\label{the-netdiffuser-r-package}}

\hypertarget{overview}{%
\subsection{Overview}\label{overview}}

\hypertarget{datasets}{%
\subsection{Datasets}\label{datasets}}

\hypertarget{visualization-methods}{%
\subsection{Visualization methods}\label{visualization-methods}}

\hypertarget{problems}{%
\subsection{Problems}\label{problems}}

\hypertarget{simulation-of-diffusion-processes}{%
\section{Simulation of diffusion processes}\label{simulation-of-diffusion-processes}}

\hypertarget{simulating-diffusion-networks}{%
\subsection{Simulating diffusion networks}\label{simulating-diffusion-networks}}

\hypertarget{rumor-spreading}{%
\subsection{Rumor spreading}\label{rumor-spreading}}

\hypertarget{difussion}{%
\subsection{Difussion}\label{difussion}}

\hypertarget{mentor-matching}{%
\subsection{Mentor Matching}\label{mentor-matching}}

\hypertarget{example-by-changing-threshold}{%
\subsection{Example by changing threshold}\label{example-by-changing-threshold}}

\hypertarget{problems-1}{%
\subsection{Problems}\label{problems-1}}

\hypertarget{statistical-inference}{%
\section{Statistical inference}\label{statistical-inference}}

\hypertarget{morans-i}{%
\subsection{Moran's I}\label{morans-i}}

\hypertarget{using-geodesics}{%
\subsection{Using geodesics}\label{using-geodesics}}

\hypertarget{structural-dependence-and-permutation-tests}{%
\subsection{Structural dependence and permutation tests}\label{structural-dependence-and-permutation-tests}}

\hypertarget{idea}{%
\subsection{Idea}\label{idea}}

\hypertarget{example-not-random-toa}{%
\subsubsection{Example Not random TOA}\label{example-not-random-toa}}

\hypertarget{regression-analysis}{%
\subsection{Regression analysis}\label{regression-analysis}}

\hypertarget{lagged-exposure-models}{%
\subsubsection{Lagged exposure models}\label{lagged-exposure-models}}

\hypertarget{contemporaneous-exposure-models}{%
\subsubsection{Contemporaneous exposure models}\label{contemporaneous-exposure-models}}

\hypertarget{problems-2}{%
\subsection{Problems}\label{problems-2}}

\hypertarget{stochastic-actor-oriented-models}{%
\chapter{Stochastic Actor Oriented Models}\label{stochastic-actor-oriented-models}}

Stochastic Actor Oriented Models (SOAM), also known as Siena models were introduced by CITATION NEEDED.

As a difference from ERGMs, Siena models look at the data generating process from the individuals' point of view. Based on McFadden's ideas of probabilistic choice, the model is founded in the following equation

\[
U_i(x) - U_i(x') \sim \mbox{Extreame Value Distribution}
\]

In other words, individuals choose between states \(x\) and \(x'\) in a probabilistic way (with some noise),

\[
\frac{\exp{f_i^Z(\beta^z,x, z)}}{\sum_{Z'\in\mathcal{C}}\exp{f_i^{Z}(\beta, x, z')}}
\]

snijders\_(sociological methodology 2001)

(Snijders, Bunt, and Steglich \protect\hyperlink{ref-Snijders2010}{2010}, @lazega2015, @Ripley2011)

\hypertarget{part-statistical-foundations}{%
\part{Statistical Foundations}\label{part-statistical-foundations}}

\hypertarget{bayes-rule}{%
\section{Bayes' Rule}\label{bayes-rule}}

\hypertarget{markov-chain}{%
\section{Markov Chain}\label{markov-chain}}

\hypertarget{metropolis-algorithm}{%
\subsection{Metropolis Algorithm}\label{metropolis-algorithm}}

\hypertarget{metropolis-hastings}{%
\subsection{Metropolis-Hastings}\label{metropolis-hastings}}

\hypertarget{likelihood-free-mcmc}{%
\subsection{Likelihood-free MCMC}\label{likelihood-free-mcmc}}

\hypertarget{appendix-appendix}{%
\appendix}


\hypertarget{datasets-1}{%
\chapter{Datasets}\label{datasets-1}}

Placeholder

\hypertarget{sns-data}{%
\section{SNS data}\label{sns-data}}

\hypertarget{about-the-data}{%
\subsection{About the data}\label{about-the-data}}

\hypertarget{variables}{%
\subsection{Variables}\label{variables}}

\bibliographystyle{apacite}

\hypertarget{references}{%
\chapter*{References}\label{references}}
\addcontentsline{toc}{chapter}{References}

\hypertarget{refs}{}
\leavevmode\hypertarget{ref-lazega2015}{}%
Lazega, Emmanuel, and Tom AB Snijders. 2015. \emph{Multilevel Network Analysis for the Social Sciences: Theory, Methods and Applications}. Vol. 12. Springer.

\leavevmode\hypertarget{ref-Ripley2011}{}%
Ripley, Ruth M., Tom AB Snijders, Paulina Preciado, and Others. 2011. ``Manual for RSIENA.'' \emph{University of Oxford: Department of Statistics, Nuffield College}, no. 2007. \href{https://www.uni-due.de/hummell/sna/R/RSiena\%7B/_\%7DManual.pdf}{https://www.uni-due.de/hummell/sna/R/RSiena\{\textbackslash{}\_\}Manual.pdf}.

\leavevmode\hypertarget{ref-Snijders2010}{}%
Snijders, Tom A B, Gerhard G. van de Bunt, and Christian E G Steglich. 2010. ``Introduction to stochastic actor-based models for network dynamics.'' \emph{Social Networks} 32 (1): 44--60. \url{https://doi.org/10.1016/j.socnet.2009.02.004}.

\end{document}
